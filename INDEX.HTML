<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Arimo:ital,wght@0,400..700;1,400..700&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>car dealer</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Arimo:ital,wght@0,400..700;1,400..700&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');
    body{
      margin: 0;
      padding: 0;
      background-image: url(images/bd.png);
      background-size: cover;
      background-repeat: no-repeat;
      background-attachment: fixed;
    }
    .container{
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      /* Sticky Header Styles */
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background-color: rgba(0, 0, 0, 0.9);
      z-index: 1000;
      box-sizing: border-box;
    }
    .header{
        color: aqua;
        text-transform: uppercase;
        font-family: poppins,sans-serif;
        font-size: 30px;
        font-weight: 700
     
    }
    .header span{
        color: rgb(255, 2, 2);
    }
 .container  nav a{
    color: aqua;
    text-decoration: none;
    margin-left: 20px;
    font-family: poppins,sans-serif;
    font-size: 20px;;
 }
 .container  nav a:hover{
    color: rgb(255, 2, 2);
    text-decoration: underline;
    cursor: pointer;
 }
 .main-content {
    text-align: center;
    margin-top: auto;
    margin-bottom: 50px;
 }
 .main-content p{
    color: rgb(5, 178, 190);
     font-family: poppins,sans-serif;
     font-size: 20px;
     font-weight: 700;
     text-transform: uppercase;
 }
 .social-icons {
    margin: 20px 0;
    color: aqua;
    font-family: poppins,sans-serif;
 }
 .social-icons i {
    font-size: 30px;
    margin: 0 10px;
    cursor: pointer;
    color: white;
    background-color: turquoise;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: inline-flex;
    justify-content: center;
    align-items: center;
 }
 .social-icons a {
    text-decoration: none;
 }
.social-icons i:hover{
    background-color: black;
    transition: 3s;
    cursor: pointer;
}
 .btn {
    padding: 10px 20px;
    background-color: aqua;
    border: none;
    font-family: poppins,sans-serif;
    font-weight: 700;
    cursor: pointer;
    border-radius: 50px;
    box-shadow: 0 0 20px turquoise;
 }
 section h1{
 text-align: center;
 align-items: center;
 font-family: poppins,sans-serif;
 font-size: 50px;
 text-transform: uppercase;
 font-weight: 700;
 color: aqua;
 margin-top: 50px;
 border-radius: 50px;
 }
 section h1 span{
    color:  red;
    text-transform: uppercase;
    font-family: poppins,sans-serif;
    font-size: 50px;;
    font-weight: 700;
    padding: 10px;
 }
 #home {
    height: 100vh;
    display: flex;
    flex-direction: column;
    padding-top: 100px; /* Push content down so it's not hidden by fixed header */
 }
 .about-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
 }
 .about-img {
    width: 80%;
    max-width: 600px;
    border-radius: 20px;
    margin-bottom: 30px;
    box-shadow: 0 0 15px aqua;
 }
 .about-cards {
    display: flex;
    justify-content: center;
    gap: 30px;
    flex-wrap: wrap;
 }
 .card {
    background-color: rgba(0, 0, 0, 0.7);
    border: 2px solid aqua;
    border-radius: 20px;
    padding: 30px;
    width: 300px;
    color: white;
    font-family: poppins, sans-serif;
    text-align: center;
 }
 .card h3 {
    color: aqua;
    margin-bottom: 15px;
 }
 section {
    padding-bottom: 50px;
    scroll-margin-top: 100px; /* Ensures section title is visible when clicking nav links */
 }
 /* YouTube-style Grid for Cars */
 .cars-container {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 30px;
    padding: 20px;
 }
 .car-card {
    background-color: #1e1e1e; /* Dark card background */
    width: 320px;
    border-radius: 15px;
    overflow: hidden;
    transition: transform 0.3s, box-shadow 0.3s;
    cursor: pointer;
    border: 1px solid #333;
 }
 .car-card:hover {
    transform: scale(1.05); /* Pop-out effect like YouTube hover */
    box-shadow: 0 10px 20px rgba(0, 255, 255, 0.2);
    z-index: 10;
 }
 .car-card img {
    width: 100%;
    height: 200px;
    object-fit: cover;
 }
 .car-info {
    padding: 15px;
    color: white;
    font-family: poppins, sans-serif;
 }
 .car-info h3 {
    margin: 0 0 5px;
    color: white;
    font-size: 18px;
 }
 .car-info p {
    color: #aaa;
    font-size: 14px;
    margin: 0;
 }
 .car-info .price {
    color: aqua;
    font-weight: 700;
    margin-top: 10px;
    display: block;
    font-size: 16px;
 }
 /* Contact Form Styling */
 .contact-form {
    max-width: 500px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 15px;
 }
 .contact-form input, .contact-form textarea {
    padding: 15px;
    border-radius: 10px;
    border: none;
    font-family: poppins, sans-serif;
 }
 .search-container {
    text-align: center;
    margin: 30px 0;
 }
 #search-bar {
    width: 50%;
    max-width: 500px;
    padding: 15px;
    border-radius: 50px;
    border: 2px solid aqua;
    background-color: rgba(0, 0, 0, 0.7);
    color: white;
    font-family: poppins, sans-serif;
 }
 footer {
    background-color: #111;
    color: white;
    text-align: center;
    padding: 40px 20px;
    font-family: poppins, sans-serif;
    margin-top: 50px;
    border-top: 2px solid aqua;
 }
 /* Full Page Dashboard Styles */
 #dashboard-page {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background-color: #f4f4f4;
    z-index: 2000;
    overflow-y: auto;
    display: none; /* Hidden by default */
    padding: 20px;
    box-sizing: border-box;
 }
 .dashboard-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #111;
    color: aqua;
    padding: 15px 30px;
    border-radius: 10px;
    margin-bottom: 20px;
 }
 .dashboard-stats {
    display: flex;
    gap: 20px;
    margin-bottom: 30px;
    flex-wrap: wrap;
 }
 .stat-card {
    flex: 1;
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    text-align: center;
    min-width: 200px;
 }
 .stat-card h3 { margin: 0; color: #555; font-size: 16px; }
 .stat-card p { font-size: 24px; font-weight: bold; color: #111; margin: 10px 0 0; }

 /* Hide main site sections when dashboard is active */
 body.dashboard-active > section:not(#dashboard-page),
 body.dashboard-active > footer,
 body.dashboard-active > .container {
    display: none; /* Hidden by default until orders are made */
 }
 /* Exam Card Styles */
 .exam-card {
     border: 5px double darkblue;
     padding: 12px;
     background: white;
     color: black;
     width: 260px; /* smaller card */
     margin: 12px auto;
     text-align: center;
     display: none;
     font-family: 'Arimo', sans-serif;
     box-shadow: 0 0 12px rgba(0,0,0,0.4);
     font-size: 14px;
 }
 @media print {
    body * {
        visibility: hidden;
    }
    #exam-card-display, #exam-card-display * {
        visibility: visible;
    }
    #exam-card-display {
        position: absolute;
        left: 50%;
        top: 10%;
        transform: translateX(-50%);
        margin: 0;
        box-shadow: none;
    }
    #exam-card-display button {
        display: none;
    }
 }
 /* Dashboard Background & Watermark */
 #dashboard-page {
    background: linear-gradient(rgba(255,255,255,0.9), rgba(255,255,255,0.9)), url(images/bd.png);
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
 }
 #dashboard-page::after {
    content: "SamsCars Driving School";
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(-30deg);
    font-size: 5vw;
    color: rgba(0, 0, 0, 0.08);
    font-weight: 900;
    pointer-events: none;
    z-index: 0;
    white-space: nowrap;
 }

 /* --- Responsive Design & Mobile Navigation --- */

 .menu-toggle {
    display: none; /* Hidden on desktop */
    background: none;
    border: none;
    color: aqua;
    font-size: 28px;
    cursor: pointer;
    z-index: 1001;
 }

 @media (max-width: 920px) { /* Breakpoint for tablets and phones */
    .container nav {
        display: none; /* Hide nav links by default */
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        background-color: rgba(0, 0, 0, 0.98);
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 30px;
    }

    .container nav.active {
        display: flex; /* Show nav when active */
    }

    .container nav a {
        margin-left: 0;
        font-size: 24px;
    }

    .menu-toggle {
        display: block; /* Show hamburger menu */
    }

    section h1, section h1 span {
        font-size: 36px;
    }
 }
  </style>
</head>
<body>
  <section id="home">
    <div class="container">
       <header class="header"><i class="fa-solid fa-car"></i> sams<span>cars</span></header>
       <nav>
          <a href="#home">HOME</a>
      <a href="#about">ABOUT US</a>
      <a href="#cars">CARS</a>
      <a href="#purchase">PURCHASE</a>
      <a href="#driving-school">DRIVING SCHOOL</a>
      <a href="#contact">CONTACT US</a>
      <a href="#dashboard">DASHBOARD</a>
           </nav> 
      <button class="menu-toggle" aria-label="Toggle menu"><i class="fa-solid fa-bars"></i></button>
    </div>
  
    <div class="main-content">
        <p>welcome to our car dealer</p>
        <div class="social-icons">
          <span>Find us on:</span>
          <a href="mailto:wamaisamuel98@gmail.com"><i class="fa-solid fa-envelope"></i></a>
          <a href="https://wa.me/254740324817?text=Hello%20SamsCars" target="_blank"><i class="fa-brands fa-whatsapp"></i></a>
          <i class="fa-brands fa-facebook"></i>
          <i class="fa-brands fa-x-twitter"></i>
        </div>
        <button class="btn">Explore Now</button>
    </div> 
  </section>

  <section id="testimonials" style="padding: 50px 20px; text-align: center; color: white;">
      <h1>Client <span>Testimonials</span></h1>
      <div style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; margin-top: 30px;">
          <div class="card" style="width: 300px;">
              <p>"SamsCars provided excellent service! I love my new BMW M4."</p>
              <h4 style="color: aqua; margin-top: 10px;">- John Doe</h4>
          </div>
          <div class="card" style="width: 300px;">
              <p>"The driving school instructors are top-notch. Highly recommended!"</p>
              <h4 style="color: aqua; margin-top: 10px;">- Jane Smith</h4>
          </div>
          <div class="card" style="width: 300px;">
              <p>"Seamless purchase process and great financing options."</p>
              <h4 style="color: aqua; margin-top: 10px;">- Michael Brown</h4>
          </div>
      </div>
  </section>

  <section id="about">
    <h1>About <span>us</span></h1>
    <div class="about-content">
        <img src="images/bd.png" alt="About Car" class="about-img">
        <div class="about-cards">
            <div class="card">
                <h3>Who We Are</h3>
                <p>We are the leading car dealership providing luxury and sports cars with over 20 years of experience in the market.</p>
            </div>
            <div class="card">
                <h3>Our Mission</h3>
                <p>To provide the best driving experience to our customers through quality vehicles and exceptional service.</p>
            </div>
        </div>
    </div>
  </section>

  <section id="cars">
      <h1>Our <span>Cars</span></h1>
      <div class="search-container">
        <input type="text" id="search-bar" placeholder="Search for cars by name...">
      </div>
      <div class="cars-container">
          <!-- Car 1 -->
          <div class="car-card">
              <img src="images/bmwm4.png" alt="BMW M4">
              <div class="car-info">
                  <h3>BMW M4 Competition</h3>
                  <p>High performance sports coupe</p>
                  <span class="price">Ksh 9,750,000</span>
                  <button class="btn order-btn" style="margin-top: 10px; width: 100%;">Order Now</button>
              </div>
          </div>
          <!-- Car 2 -->
          <div class="car-card">
              <img src="https://images.unsplash.com/photo-1617788138017-80ad40651399?auto=format&fit=crop&w=800&q=80" alt="BMW M8">
              <div class="car-info">
                  <h3>BMW M8 Gran Coupe</h3>
                  <p>Luxury meets power</p>
                  <span class="price">Ksh 16,900,000</span>
                  <button class="btn order-btn" style="margin-top: 10px; width: 100%;">Order Now</button>
              </div>
          </div>
          <!-- Car 3 -->
          <div class="car-card">
              <img src="images/x5.png" alt="BMW X5">
              <div class="car-info">
                  <h3>BMW X5 M</h3>
                  <p>The ultimate sports activity vehicle</p>
                  <span class="price">Ksh 13,800,000</span>
                  <button class="btn order-btn" style="margin-top: 10px; width: 100%;">Order Now</button>
              </div>
          </div>
          <!-- Car 4 -->
          <div class="car-card">
              <img src="images/x6.png" alt="Mercedes AMG">
              <div class="car-info">
                  <h3>BMW x6</h3>
                  <p>Pure performance and style</p>
                  <span class="price">Ksh 15,400,000</span>
                  <button class="btn order-btn" style="margin-top: 10px; width: 100%;">Order Now</button>
              </div>
          </div>
          <!-- Car 5 -->
          <div class="car-card">
              <img src="images/5 SERIES.PNG" alt="Audi R8">
              <div class="car-info">
                  <h3>BMW 5 series</h3>
                  <p>Born on the track, built for the road</p>
                  <span class="price">Ksh 20,600,000</span>
                  <button class="btn order-btn" style="margin-top: 10px; width: 100%;">Order Now</button>
              </div>
          </div>
          <!-- Car 6 -->
          <div class="car-card">
              <img src="images/g30.png" alt="g30">
              <div class="car-info">
                  <h3>BMW G30</h3>
                  <p>The quintessential sports car</p>
                  <span class="price">Ksh 14,900,000</span>
                  <button class="btn order-btn" style="margin-top: 10px; width: 100%;">Order Now</button>
              </div>
          </div>
          <!-- Car 7 -->
          <div class="car-card">
              <img src="images/BMW i8 Roadster.PNG" alt="BMW i8">
              <div class="car-info">
                  <h3>BMW i8 Roadster</h3>
                  <p>Plug-in hybrid sports car</p>
                  <span class="price">Ksh 18,500,000</span>
                  <button class="btn order-btn" style="margin-top: 10px; width: 100%;">Order Now</button>
              </div>
          </div>
          <!-- Car 8 -->
          <div class="car-card">
              <img src="https://images.unsplash.com/photo-1554744512-d6c603f27c54?auto=format&fit=crop&w=800&q=80" alt="BMW 7 Series">
              <div class="car-info">
                  <h3>BMW 7 Series</h3>
                  <p>The pinnacle of luxury</p>
                  <span class="price">Ksh 22,000,000</span>
                  <button class="btn order-btn" style="margin-top: 10px; width: 100%;">Order Now</button>
              </div>
          </div>
          <!-- Car 9 -->
          <div class="car-card">
              <img src="https://images.unsplash.com/photo-1580273916550-e323be2ae537?auto=format&fit=crop&w=800&q=80" alt="BMW Z4">
              <div class="car-info">
                  <h3>BMW Z4 Convertible</h3>
                  <p>Freedom on four wheels</p>
                  <span class="price">Ksh 8,500,000</span>
                  <button class="btn order-btn" style="margin-top: 10px; width: 100%;">Order Now</button>
              </div>
          </div>
      </div>
  </section>

  <section id="purchase">
      <h1>Pur<span>chase</span></h1>
      <div class="about-cards"> <!-- Reusing card style for consistency -->
          <div class="card">
              <h3>Lease</h3>
              <p>Start driving today with low monthly payments.</p>
              <p id="lease-quote-result" style="color: #0f0; font-weight: bold; min-height: 24px;"></p>
              <button class="btn" style="margin-top:10px;" onclick="alert('Application started!')">Apply Now</button>
              <button class="btn" style="margin-top:10px; background-color: #333; border: 1px solid aqua;" onclick="regenerateQuote('lease')">Regenerate Quote</button>
          </div>
          <div class="card">
              <h3>Buy</h3>
              <p>Own your dream car with our financing options.</p>
              <p id="buy-quote-result" style="color: #0f0; font-weight: bold; min-height: 24px;"></p>
              <button class="btn" style="margin-top:10px;" onclick="alert('Quote request sent!')">Get Quote</button>
              <button class="btn" style="margin-top:10px; background-color: #333; border: 1px solid aqua;" onclick="regenerateQuote('buy')">Regenerate Quote</button>
          </div>
      </div>
  </section>

  <section id="contact">
      <h1>Contact <span>Us</span></h1>
      <form class="contact-form">
          <input type="text" placeholder="Your Name" required>
          <input type="email" placeholder="Your Email" required>
          <textarea rows="5" placeholder="Message"></textarea>
          <button type="submit" class="btn">Send Message</button>
      </form>
  </section>

  <section id="driving-school">
      <h1>Driving <span>School</span></h1>
      <div class="container" style="display:block; text-align:center; position: relative;">
          <p style="color: white; margin-bottom: 20px;">Join our expert driving courses today!</p>
          <form class="contact-form" id="driving-form">
              <input type="text" id="student-name" placeholder="Full Name" required>
              <select id="student-gender" required style="padding: 12px; border-radius: 10px; font-family: poppins, sans-serif;">
                <option value="">Select Gender</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
              </select>
              <input type="date" id="student-dob" placeholder="Date of Birth" required>
              <input type="text" id="student-id" placeholder="ID / Passport Number" required>
              <input type="tel" id="student-phone" placeholder="WhatsApp Number" required>
              <input type="text" id="student-address" placeholder="Address" required>
              <label style="font-size:13px; color:#fff;">Upload passport photo (optional)</label>
              <input type="file" id="student-photo" accept="image/*" style="padding:6px; border-radius:6px;">
              <select id="course-type" style="padding: 15px; border-radius: 10px; width: 100%; margin-bottom: 15px; font-family: poppins, sans-serif;">
                  <option value="Beginner">Beginner Course (Ksh 26,000)</option>
                  <option value="Advanced">Advanced Course (Ksh 39,000)</option>
              </select>
              <button type="submit" class="btn">Apply Now</button>
          </form>
      </div>
  </section>

  <!-- Full Page Dashboard -->
  <div id="dashboard-page">
      <div class="dashboard-header">
          <h2><i class="fa-solid fa-gauge-high"></i> Customer Dashboard</h2>
          <button class="btn" onclick="toggleDashboard(false)" style="background: red; color: white;">Back to Home</button>
          <div>
              <button class="btn" onclick="clearAllData()" style="background: orange; color: black; margin-right: 10px;">Clear All Data</button>
              <button class="btn" onclick="toggleDashboard(false)" style="background: red; color: white;">Back to Home</button>
          </div>
      </div>

      <div class="dashboard-stats">
          <div class="stat-card">
              <h3>Total Orders</h3>
              <p id="stat-orders">0</p>
          </div>
          <div class="stat-card">
              <h3>Total Spent</h3>
              <p id="stat-spent" style="color: aqua;">Ksh 0</p>
          </div>
      </div>

      <div style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 30px;">
          <canvas id="salesChart" style="max-height: 300px;"></canvas>
      </div>

      <div style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 30px;">
          <h3 style="color: black; margin-top: 0;">Add New Car to Inventory</h3>
          <form id="add-car-form" style="display: flex; flex-direction: column; gap: 10px;">
              <input type="text" id="new-car-name" placeholder="Car Name (e.g. BMW M3)" required style="padding: 10px; border: 1px solid #ccc; border-radius: 5px;">
              <input type="text" id="new-car-desc" placeholder="Description (e.g. Sporty sedan)" required style="padding: 10px; border: 1px solid #ccc; border-radius: 5px;">
              <input type="text" id="new-car-price" placeholder="Price (e.g. Ksh 8,500,000)" required style="padding: 10px; border: 1px solid #ccc; border-radius: 5px;">
              <input type="url" id="new-car-img" placeholder="Image URL" required style="padding: 10px; border: 1px solid #ccc; border-radius: 5px;">
              <button type="submit" class="btn" style="background-color: green; color: white;">Add Car</button>
          </form>
      </div>

      <h1 style="color: black;">My <span>Orders</span></h1>
      <div id="order-list" class="cars-container"></div>
      
      <!-- Driving School Dashboard Section -->
      <div id="student-dashboard" style="text-align: center; margin-top: 50px; display: none;">
        <h1 style="font-size: 30px; color: black;">Driving School <span>Portal</span></h1>
        <div class="card" style="margin: 0 auto; width: 80%; max-width: 400px;">
            <img id="dash-photo" src="" alt="photo" style="width:80px;height:80px;border-radius:6px;margin:0 auto 8px;display:none;object-fit:cover;">
            <h3 id="dash-student-name"></h3>
            <p>Gender: <span id="dash-gender"></span></p>
            <p>DOB: <span id="dash-dob"></span></p>
            <p>ID: <span id="dash-id"></span></p>
            <p>Address: <span id="dash-address"></span></p>
            <p>Course: <span id="dash-course"></span></p>
            <p>Fees: <span id="dash-fees" style="color: red;">Pending</span></p>
            <button class="btn" onclick="payFees()" id="btn-pay">Pay Fees</button>
            <button class="btn" onclick="generateExamCard()" id="btn-exam" style="display:none; background-color: aqua; color: black; margin-top: 10px;">Generate Exam Card</button>
        </div>
                <div id="exam-card-display" class="exam-card">
                        <img id="permit-photo" src="" alt="passport" style="width:72px;height:72px;border-radius:4px;display:block;margin:0 auto 6px;object-fit:cover;">
                        <i class="fa-solid fa-car-side" style="font-size: 32px; color: darkblue; margin-bottom: 6px;"></i>
                        <h2 style="color: darkblue; border-bottom: 2px solid red; display: inline-block; font-size:16px; padding:6px 8px;">EXAM PERMIT</h2>
                        <p style="margin:6px 0;"><strong>Name:</strong> <span id="permit-name"></span></p>
                        <p style="margin:4px 0;"><strong>Course:</strong> <span id="permit-course"></span></p>
                        <p style="margin:4px 0;"><strong>ID:</strong> <span id="permit-id"></span></p>
                        <p style="color: green; font-weight: bold; border: 2px solid green; padding: 5px; display: inline-block; margin-top:8px;">AUTHORIZED</p>
                        <div style="display:flex; gap:8px; justify-content:center; margin-top:10px;">
                            <button class="btn" onclick="printExamCard()" style="background-color: darkblue;">Print</button>
                        </div>
                        <p style="font-size: 10px; margin-top:8px;">SamsCars Driving School</p>
                </div>
    </div>
  </div>

  <footer>
      <p>&copy; 2024 SamsCars. All rights reserved.</p>
      <div class="social-icons" style="justify-content: center; display: flex;">
        <a href="mailto:wamaisamuel98@gmail.com"><i class="fa-solid fa-envelope"></i></a>
        <a href="https://wa.me/254740324817?text=Hello%20SamsCars" target="_blank"><i class="fa-brands fa-whatsapp"></i></a>
        <i class="fa-brands fa-facebook"></i>
        <i class="fa-brands fa-instagram"></i>
        <i class="fa-brands fa-x-twitter"></i>
      </div>
  </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        // Smooth scrolling for nav links and Explore button
        document.querySelectorAll('nav a').forEach(a => {
            a.addEventListener('click', (e) => {
                const href = a.getAttribute('href');
                if (href && href.startsWith('#')) {
                    e.preventDefault();
                    // Require a simple passcode before opening dashboard
                    if (href === '#dashboard') {
                        const code = prompt('Enter dashboard passcode (default: 1234)');
                        if (code === '1234') { toggleDashboard(true); }
                        else { alert('Incorrect passcode.'); }
                        return;
                    }
                    document.querySelector(href).scrollIntoView({ behavior: 'smooth' });
                }
            });
        });

        const exploreBtn = document.querySelector('.main-content .btn');
        if (exploreBtn) {
            exploreBtn.addEventListener('click', () => document.querySelector('#cars').scrollIntoView({ behavior: 'smooth' }));
        }

        // Simple form handling (contact)
        const contactForm = document.querySelector('#contact .contact-form');
        if(contactForm) {
            contactForm.addEventListener('submit', (e) => {
                e.preventDefault();
                alert('Thank you! Your message has been sent.');
                contactForm.reset();
            });
        }

        // Car search filter
        const searchBar = document.getElementById('search-bar');
        if(searchBar) {
            searchBar.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();
                const carCards = document.querySelectorAll('.car-card');
                carCards.forEach(card => {
                    const carName = card.querySelector('.car-info h3').textContent.toLowerCase();
                    card.style.display = carName.includes(searchTerm) ? 'block' : 'none';
                });
            });
        }

        // --- Add New Car Logic ---
        const addCarForm = document.getElementById('add-car-form');
        let inventory = JSON.parse(localStorage.getItem('carInventory')) || [];

        function renderInventory() {
            const container = document.querySelector('.cars-container');
            // Only append new cars, don't clear existing hardcoded ones to avoid flicker/complexity
            // Ideally, all cars should be dynamic, but for this hybrid approach:
            
            // Remove previously added dynamic cars to avoid duplicates on re-render
            const dynamicCars = container.querySelectorAll('.dynamic-car');
            dynamicCars.forEach(el => el.remove());

            inventory.forEach(car => {
                const carDiv = document.createElement('div');
                carDiv.className = 'car-card dynamic-car';
                carDiv.innerHTML = `
                    <img src="${car.img}" alt="${car.name}">
                    <div class="car-info">
                        <h3>${car.name}</h3>
                        <p>${car.desc}</p>
                        <span class="price">${car.price}</span>
                        <button class="btn order-btn" style="margin-top: 10px; width: 100%;">Order Now</button>
                    </div>
                `;
                container.appendChild(carDiv);
            });
            
            // Re-attach event listeners to new buttons
            attachOrderListeners();
        }

        if(addCarForm) {
            addCarForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const name = document.getElementById('new-car-name').value;
                const desc = document.getElementById('new-car-desc').value;
                const price = document.getElementById('new-car-price').value;
                const img = document.getElementById('new-car-img').value;

                inventory.push({ name, desc, price, img });
                localStorage.setItem('carInventory', JSON.stringify(inventory));
                
                alert('Car added successfully!');
                addCarForm.reset();
                renderInventory();
            });
        }

        // Orders and dashboard
        const orderList = document.getElementById('order-list');
        let orders = JSON.parse(localStorage.getItem('carOrders')) || [];

        function renderOrders() {
            orderList.innerHTML = '';
            let totalSpent = 0;
            orders.forEach((order, index) => {
                const priceNum = parseInt(order.price.replace(/[^0-9]/g, '')) || 0;
                totalSpent += priceNum;
                const orderCard = document.createElement('div');
                orderCard.className = 'car-card';
                orderCard.innerHTML = `
                    <img src="${order.img}" alt="${order.name}">
                    <div class="car-info">
                        <h3>${order.name}</h3>
                        <p>Ordered on: ${order.date}</p>
                        <p><i class="fa-brands fa-whatsapp"></i> ${order.phone}</p>
                        <span class="price">${order.price}</span>
                        <button class="btn" onclick="cancelOrder(${index})" style="background-color: red; margin-top: 10px; width: 100%;">Cancel Order</button>
                    </div>`;
                orderList.appendChild(orderCard);
            });
            document.getElementById('stat-orders').innerText = orders.length;
            document.getElementById('stat-spent').innerText = 'Ksh ' + totalSpent.toLocaleString();
            updateChart(orders.length, totalSpent);
        }

        // Wire up existing order buttons
        function attachOrderListeners() {
            document.querySelectorAll('.order-btn').forEach(btn => {
                // Remove old listener to prevent duplicates (simple way)
                const newBtn = btn.cloneNode(true);
                btn.parentNode.replaceChild(newBtn, btn);
                
                newBtn.addEventListener('click', (e) => {
                    const card = e.target.closest('.car-card');
                    const name = card.querySelector('h3').innerText;
                    const price = card.querySelector('.price').innerText;
                    const img = card.querySelector('img').src;
                    const date = new Date().toLocaleDateString();
                    
                    const phone = prompt(`Enter M-Pesa number to pay ${price} for ${name}:`);
                    if (phone) {
                        setTimeout(() => {
                            orders.push({ name, price, img, date, phone });
                            localStorage.setItem('carOrders', JSON.stringify(orders));
                            alert('Payment Successful! Car ordered.');
                            renderOrders();
                            toggleDashboard(true);
                        }, 1000);
                    }
                });
            });
        }

        window.cancelOrder = function(index) {
            if (confirm('Are you sure you want to cancel this order?')) {
                orders.splice(index,1);
                localStorage.setItem('carOrders', JSON.stringify(orders));
                renderOrders();
            }
        };

        // Driving school logic
        const drivingForm = document.getElementById('driving-form');
        let tempPhotoData = '';
        const photoInput = document.getElementById('student-photo');
        if (photoInput) {
            photoInput.addEventListener('change', (ev) => {
                const f = ev.target.files && ev.target.files[0];
                if (!f) { tempPhotoData = ''; return; }
                const reader = new FileReader();
                reader.onload = function(evt) { tempPhotoData = evt.target.result; };
                reader.readAsDataURL(f);
            });
        }

        if (drivingForm) {
            drivingForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const name = document.getElementById('student-name').value;
                const gender = document.getElementById('student-gender').value;
                const dob = document.getElementById('student-dob').value;
                const idnum = document.getElementById('student-id').value;
                const phone = document.getElementById('student-phone').value;
                const address = document.getElementById('student-address').value;
                const course = document.getElementById('course-type').value;
                const fees = course === 'Beginner' ? 'Ksh 26,000' : 'Ksh 39,000';
                const student = { name, gender, dob, idnum, phone, address, course, fees, paid: false, id: Math.floor(Math.random()*10000), photo: tempPhotoData || '' };
                localStorage.setItem('drivingStudent', JSON.stringify(student));
                alert('Application submitted! Check your Dashboard.');
                drivingForm.reset(); tempPhotoData = '';
                renderStudentDashboard();
            });
        }

        function renderStudentDashboard() {
            const student = JSON.parse(localStorage.getItem('drivingStudent'));
            const dash = document.getElementById('student-dashboard');
            if (!student) { dash.style.display = 'none'; return; }
            dash.style.display = 'block';
            document.getElementById('dash-student-name').innerText = student.name;
            document.getElementById('dash-course').innerText = student.course;
            document.getElementById('dash-gender').innerText = student.gender || '';
            document.getElementById('dash-dob').innerText = student.dob || '';
            document.getElementById('dash-id').innerText = student.idnum || '';
            document.getElementById('dash-address').innerText = student.address || '';
            const dashPhoto = document.getElementById('dash-photo');
            if (student.photo) { dashPhoto.src = student.photo; dashPhoto.style.display = 'block'; } else { dashPhoto.style.display = 'none'; }
            const feesElem = document.getElementById('dash-fees');
            const payBtn = document.getElementById('btn-pay');
            const examBtn = document.getElementById('btn-exam');
            if (student.paid) {
                feesElem.innerText = 'PAID'; feesElem.style.color = 'lightgreen'; payBtn.style.display = 'none'; examBtn.style.display = 'inline-block';
            } else {
                feesElem.innerText = student.fees + ' (Pending)'; feesElem.style.color = 'red'; payBtn.style.display = 'inline-block'; examBtn.style.display = 'none';
            }
        }

        window.payFees = function() {
            const student = JSON.parse(localStorage.getItem('drivingStudent'));
            if (!student) return alert('No student found');
            const phone = prompt(`Enter M-Pesa number to pay ${student.fees}:`);
            if (phone) {
                setTimeout(() => {
                    student.paid = true; student.phone = phone; localStorage.setItem('drivingStudent', JSON.stringify(student));
                    alert('Fees Paid Successfully!'); renderStudentDashboard();
                }, 1000);
            }
        };

        window.generateExamCard = function() {
            const student = JSON.parse(localStorage.getItem('drivingStudent'));
            if (!student || !student.paid) return alert('Fees must be paid before generating exam card.');
            document.getElementById('permit-name').innerText = student.name;
            document.getElementById('permit-course').innerText = student.course;
            document.getElementById('permit-id').innerText = 'SC-' + student.id;
            
            // Set photo for exam card
            const permitPhoto = document.getElementById('permit-photo');
            if (student.photo) {
                permitPhoto.src = student.photo;
                permitPhoto.style.display = 'block';
            } else {
                permitPhoto.style.display = 'none';
            }

            document.getElementById('exam-card-display').style.display = 'block';
            document.getElementById('exam-card-display').scrollIntoView({ behavior: 'smooth' });
        };

        window.printExamCard = function() { window.print(); };

        window.clearAllData = function() {
            if(confirm("Are you sure you want to clear all data? This cannot be undone.")) {
                localStorage.clear();
                location.reload();
            }
        };

        window.regenerateQuote = function(type) {
            const id = Math.floor(Math.random() * 100000);
            if (type === 'lease') {
                document.getElementById('lease-quote-result').innerText = `Ref #${id}: Ksh ${(Math.floor(Math.random() * 50000) + 40000).toLocaleString()}/month`;
            } else {
                document.getElementById('buy-quote-result').innerText = `Ref #${id}: Ksh ${(Math.floor(Math.random() * 5000000) + 3000000).toLocaleString()}`;
            }
        };

        // Download exam card as PDF using html2canvas + jsPDF (fit to A4, keep card small)
        function downloadExamCardPDF() {
            const el = document.getElementById('exam-card-display');
            if (!el || el.style.display === 'none') return alert('No exam card to download.');
            html2canvas(el, { scale: 2 }).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF('p', 'mm', 'a4');
                const pageWidth = pdf.internal.pageSize.getWidth();
                const pageHeight = pdf.internal.pageSize.getHeight();
                
                // Set fixed width for the card on PDF (e.g., 100mm)
                const pdfCardWidth = 100; 
                const pdfCardHeight = (canvas.height * pdfCardWidth) / canvas.width;
                
                const x = (pageWidth - pdfCardWidth) / 2;
                const y = 20; // Top margin
                pdf.addImage(imgData, 'PNG', x, y, pdfCardWidth, pdfCardHeight);
                pdf.save('exam-permit.pdf');
            }).catch(err => alert('Failed to generate PDF: ' + err));
        }

        // Add download button to exam card area
        (function addDownloadButton() {
            const examDiv = document.getElementById('exam-card-display');
            if (!examDiv) return;
            const btn = document.createElement('button');
            btn.className = 'btn'; btn.style.backgroundColor = 'green'; btn.style.marginTop = '8px';
            btn.innerText = 'Download Card';
            btn.addEventListener('click', downloadExamCardPDF);
            examDiv.querySelector('button[onclick="printExamCard()"]')?.insertAdjacentElement('afterend', btn);
        })();

        // Dashboard toggle
        window.toggleDashboard = function(show) {
            const dash = document.getElementById('dashboard-page');
            if (show) { dash.style.display = 'block'; document.body.classList.add('dashboard-active'); renderOrders(); renderStudentDashboard(); }
            else { dash.style.display = 'none'; document.body.classList.remove('dashboard-active'); }
        };

        // Chart.js Setup - line chart (blue)
        let salesChart;
        function updateChart(orderCount, totalSpent) {
            const ctx = document.getElementById('salesChart').getContext('2d');
            if (salesChart) salesChart.destroy();
            salesChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Orders', 'Students', 'Total (M)'],
                    datasets: [{
                        label: 'Activity',
                        data: [orderCount, localStorage.getItem('drivingStudent') ? 1 : 0, +(totalSpent/1000000).toFixed(2)],
                        borderColor: 'rgba(10,102,255,0.95)',
                        backgroundColor: 'rgba(10,102,255,0.15)',
                        pointBackgroundColor: 'rgba(10,102,255,1)',
                        tension: 0.3,
                        fill: true,
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    scales: { y: { beginAtZero: true } }
                }
            });
        }

        // Initial render
        renderOrders(); renderStudentDashboard();
    </script>
</body>
</html>         },
                options: {
                    responsive: true,
                    scales: { y: { beginAtZero: true } }
                }
            });
        }

        // Initial render
        renderOrders(); renderStudentDashboard();
    </script>
</body>
</html>         },
                options: {
                    responsive: true,
                    scales: { y: { beginAtZero: true } }
                }
            });
        }

        // Initial render
        renderOrders(); renderStudentDashboard();
    </script>
</body>
</html>         },
                options: {
                    responsive: true,
                    scales: { y: { beginAtZero: true } }
                }
            });
        }

        // Initial render
        renderOrders(); renderStudentDashboard(); renderInventory();
        // attachOrderListeners is called inside renderInventory, but we need it for initial static cars too if inventory is empty
        if(inventory.length === 0) attachOrderListeners();

        // Mobile Navigation Toggle
        const menuToggle = document.querySelector('.menu-toggle');
        const nav = document.querySelector('.container nav');

        if (menuToggle && nav) {
            menuToggle.addEventListener('click', () => {
                nav.classList.toggle('active');
                const icon = menuToggle.querySelector('i');
                if (nav.classList.contains('active')) {
                    icon.classList.remove('fa-bars');
                    icon.classList.add('fa-times');
                } else {
                    icon.classList.remove('fa-times');
                    icon.classList.add('fa-bars');
                }
            });

            // Close menu when a link is clicked
            nav.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    if (nav.classList.contains('active')) {
                        nav.classList.remove('active');
                        menuToggle.querySelector('i').classList.remove('fa-times');
                        menuToggle.querySelector('i').classList.add('fa-bars');
                    }
                });
            });
        }
    </script>
</body>
</html>